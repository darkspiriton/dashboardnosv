!function t(o,e,n){function r(a,c){if(!e[a]){if(!o[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var f=e[a]={exports:{}};o[a][0].call(f.exports,function(t){var e=o[a][1][t];return r(e?e:t)},f,f.exports,t,o,e,n)}return e[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,o,e){"use strict";angular.module("App",["ngResource","ngMessages","ngSanitize","ngAnimate","toastr","ui.router","satellizer","angular-fb","doowb.angular-pusher"]).config(["$stateProvider","$urlRouterProvider","$authProvider","$fbProvider","$locationProvider","PusherServiceProvider",function(t,o,e,n,r,i){e.tokenName="token",e.tokenPrefix="DB_NV",n.appId=0x41487b8176bd7,n.extendPermissions="publish_actions,,user_photos",t.state("Home",{url:"/home",templateUrl:"http://"+location.hostname+"/app/partials/efecto.html",controller:"homeCtrl"}),o.otherwise("/home"),i.setToken("3af9472db014da6465ce").setOptions({})}]).directive("selectpicker",["$timeout",function(t){return{link:function(o,e,n,r){$(e);t(function(){$(e).selectpicker()},3e3)}}}]).directive("fileModel",function(){return{controller:function(t,o,e,n){var r=t(e.fileModel);o.on("change",function(){r.assign(n,this.files),n.$apply()})}}}).factory("color",function(){var t=["#F44336","#03A9F4","#8BC34A","#009688","#E91E63","#FF9800","#00BCD4","#FFEB3B","#9C27B0","#673AB7","#3F51B5","#4CAF50"],o=function(o){return o=o||0,o=o>11?o-12:o,t[o]};return{get:o}}).factory("chart",["color",function(t){var o=function i(t,o,e){var i=[];for(var n in t){var r={};for(var a in o)r[a]=t[n][o[a]];i.push(r)}e(i)},e=function(t,o,e){for(var n=[],r=0;r<t.length;r++){for(var i=[],a=1;o>=a;a++)i.push([a,0]);for(var c in t[r].data)for(var l=0;l<i.length;l++)i[l][0]==t[r].data[c].fecha&&(i[l][1]=t[r].data[c].quantity);n.push({data:i,label:t[r].name,bars:{show:!0,barWidth:.1,order:r+1,lineWidth:0}})}e(n)},n=function(t,e){o(t,e,function(t){$.plot("#pie-chart",t,{series:{pie:{innerRadius:.5,show:!0,stroke:{width:4}}},legend:{container:".flc-pie",backgroundOpacity:.7,noColumns:0,backgroundColor:"white",lineWidth:0},grid:{hoverable:!0,clickable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:-10},defaultTheme:!1,cssClass:"flot-tooltip"}})})},r=function(t,o){e(t,o,function(t){$("#bar-chart")[0]&&$.plot($("#bar-chart"),t,{grid:{borderWidth:1,borderColor:"#eee",show:!0,hoverable:!0,clickable:!0},yaxis:{tickColor:"#eee",tickDecimals:0,font:{lineHeight:13,style:"normal",color:"#9f9f9f"},shadowSize:0},xaxis:{tickColor:"#fff",tickDecimals:0,font:{lineHeight:13,style:"normal",color:"#9f9f9f"},shadowSize:0},legend:{container:".flc-bar",backgroundOpacity:.5,noColumns:0,backgroundColor:"white",lineWidth:0},bars:{show:!0,fill:.7,lineWidth:1},colors:["#F44336","#03A9F4","#8BC34A","#009688","#E91E63","#FF9800","#00BCD4","#FFEB3B","#9C27B0","#673AB7","#3F51B5","#4CAF50"]}),$(".flot-chart")[0]&&($(".flot-chart").bind("plothover",function(t,o,e){if(e){var n=(e.datapoint[0].toFixed(0),e.datapoint[1].toFixed(0));$(".flot-tooltip").html(e.series.label+" - "+n+" movimiento(s)").css({top:e.pageY+5,left:e.pageX+5}).show()}else $(".flot-tooltip").hide()}),$("<div class='flot-tooltip' class='chart-tooltip'></div>").appendTo("body"))})};return{draw:n,drawColummn:r}}]).factory("charts",function(){function t(t,e,n,r){return t=document.getElementById(t),o=new Chart(t,{type:e||"line",data:n||{},options:r||{}})}var o;return{make:t}}).factory("toformData",function(){var t=function(t){if(void 0===t)return t;var o=new FormData;return angular.forEach(t,function(t,e){t instanceof FileList?1===t.length?o.append(e,t[0]):angular.forEach(t,function(t,n){o.append(e+"_"+n,t)}):t instanceof Array?o.append(e,angular.toJson(t)):o.append(e,t)}),o};return{dataFile:t}}).factory("petition",["$http","$location","$q",function(t,o,e){var n=function(t){var e=o.protocol(),n=o.host();return e+"://"+n+"/"+t};return{get:function(o,r){r=r||{};var i=e.defer();return t.get(n(o),r).then(function(t){i.resolve(t.data)},function(t){i.reject(t)}),i.promise},post:function(o,r,i){r=r||{},i=i||{};var a=e.defer();return t.post(n(o),r,i).then(function(t){a.resolve(t.data)},function(t){a.reject(t)}),a.promise},put:function(o,r){r=r||{};var i=e.defer();return t.put(n(o),r).then(function(t){i.resolve(t.data)},function(t){i.reject(t)}),i.promise},"delete":function(o,r){r=r||{};var i=e.defer();return t["delete"](n(o),r).then(function(t){i.resolve(t.data)},function(t){i.reject(t)}),i.promise},custom:function(o){var n=e.defer();return t(o).then(function(t){n.resolve(t.data)},function(t){n.reject(t)}),n.promise}}}]).factory("storage",["$window","$log","$auth",function(t,o,e){var n="localStorage",r="roleName",i="fullName",a="routesList";return{get:function(o){return t[n].getItem(o)},set:function(o,e){return t[n].setItem(o,e)},remove:function(o){return t[n].removeItem(o)},removeStorage:function(){e.removeToken(),t[n].removeItem(r),t[n].removeItem(i),t[n].removeItem(a)}}}]).factory("util",["$location",function(t){return{liPage:function(t){$("li.active").removeClass("active"),$("li#"+t).addClass("active")},muestraformulario:function(){$("#formulariohide").fadeIn("fast"),$("html, body").stop().animate({scrollTop:$("#formulariohide").offset().top-100},1e3)},ocultaformulario:function(){$("#formulariohide").fadeOut("fast"),$("body").animate({scrollTop:0},1e3)},modal:function(t){t=t||"Modal",$("#"+t).modal("show")},modalClose:function(t){t=t||"Modal",$("#"+t).modal("hide")},baseUrl:function(o){var e=t.protocol(),n=t.host();return e+"://"+n+"/"+o},resetTable:function(t,o,e){e=e||"#table",t.tableData=[],$(e).AJQtable("view",t,o)},setDate:function(t){var o="";t=new Date(t);var e=t.getDate();e=1==e.toString().length?"0"+e.toString():e;var n=t.getMonth()+1;n=1==n.toString().length?"0"+n.toString():n;var r=t.getFullYear();return o.concat(" ",e,"-",n,"-",r)}}}]).controller("appCtrl",["$state","$log","$scope","$window","$auth","storage","$location","Pusher","petition","toastr",function(t,o,e,n,r,i,a,c,l,u){function f(o){"string"==typeof o.event&&("productDelete"==o.event?t.go("Productos Eliminados"):t.go("Productos"))}if(e.pageTitle="Home",e.notifications=[],e.logout=function(){"Asociado"==i.get("roleName")?(i.removeStorage(),n.location.href="/asociados"):null===i.get("roleName")?(i.removeStorage(),n.location.href="/asociados"):(i.removeStorage(),n.location.href="/")},r.isAuthenticated()){var s=i.get("roleName"),d=i.get("fullName");s&&d||e.logout(),e.userInfo={role:s,name:d},e.$on("$stateChangeSuccess",function(t,o){angular.isDefined(o.name)&&(e.pageTitle=o.name+" | NosVenden")})}else"/asociados/dashboard"!=location.pathname&&(n.location.href="/");e.listNotification=function(){l.get("api/notification").then(function(t){e.notifications=t},function(t){u.error("Ocurrio un problema al listar las notificaciones")})},e.checkNotification=function(t){var o=e.notifications[t];if(o.status)return f(o);var n=o.id;l.put("api/notification/"+n).then(function(n){e.notifications[t]=n,f(o)},function(t){u.error("Ocurrio un problema al listar las notificaciones")})},e.clearNotification=function(){var t=e.notifications.length;l.put("api/notification/update/all",{count:t}).then(function(t){e.notifications=t},function(t){u.error("Ocurrio un problema al listar las notificaciones")})},c.subscribe("notification","create",function(t){e.notifications.unshift(t)}),c.subscribe("notification","update",function(t){var o=e.notifications;for(var n in t)for(var r in o)if(t[n].id==o[r].id){o[r]=t[n];break}}),e.formatDate=function(t){var o=new Date(t);return o},e.$watch("notifications",function(t,o){var n=0;for(var r in t)0===t[r].status&&n++;e.numNotif=n},!0),angular.element(document).ready(function(){e.listNotification()})}])},{}]},{},[1]);